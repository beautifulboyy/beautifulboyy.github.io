<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>数据库DDL DML | 今晚你会梦到电子羊吗</title><meta name="keywords" content="DDL,DML"><meta name="author" content="sakura,2294014200@qq.com"><meta name="copyright" content="sakura"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="DDLDDL [Data Definition Language] - 数据定义语言 SQL命令 create - 创建 创建表(table),视图(view),用户(user),函数(function),存储过程(procedure),数据库(database),约束(constraints) 以上构建的都是属于数据库DB的对象&#x2F;单位 - DB的基本单位是table  drop - 删除 删除表">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库DDL DML">
<meta property="og:url" content="http://beautifulboyy/2021/08/20/mysql02/index.html">
<meta property="og:site_name" content="今晚你会梦到电子羊吗">
<meta property="og:description" content="DDLDDL [Data Definition Language] - 数据定义语言 SQL命令 create - 创建 创建表(table),视图(view),用户(user),函数(function),存储过程(procedure),数据库(database),约束(constraints) 以上构建的都是属于数据库DB的对象&#x2F;单位 - DB的基本单位是table  drop - 删除 删除表">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://beautifulboyy/img/wlop012.jpg">
<meta property="article:published_time" content="2021-08-20T06:27:30.000Z">
<meta property="article:modified_time" content="2021-08-21T02:26:30.064Z">
<meta property="article:author" content="sakura">
<meta property="article:tag" content="DDL">
<meta property="article:tag" content="DML">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://beautifulboyy/img/wlop012.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://beautifulboyy/2021/08/20/mysql02/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: sakura","link":"链接: ","source":"来源: 今晚你会梦到电子羊吗","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '数据库DDL DML',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-08-21 10:26:30'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">26</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/wlop012.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">今晚你会梦到电子羊吗</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">数据库DDL DML</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-20T06:27:30.000Z" title="发表于 2021-08-20 14:27:30">2021-08-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-08-21T02:26:30.064Z" title="更新于 2021-08-21 10:26:30">2021-08-21</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>26分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="数据库DDL DML"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h1><p>DDL [Data Definition Language] - 数据定义语言</p>
<h3 id="SQL命令"><a href="#SQL命令" class="headerlink" title="SQL命令"></a>SQL命令</h3><ol>
<li><p>create - 创建</p>
<p><strong>创建表(table)</strong>,视图(view),用户(user),函数(function),存储过程(procedure),数据库(database),约束(constraints)</p>
<p>以上构建的都是属于数据库DB的对象/单位 - DB的基本单位是table</p>
</li>
<li><p>drop - 删除</p>
<p><strong>删除表(table)</strong>,,视图(view),用户(user),函数(function),存储过程(procedure),数据库(database),约束(constraints)</p>
<p>但是不能够删除具体行记录,行记录是由delete命令删除的.</p>
</li>
<li><p>alter - 修改</p>
<p>修改列名,列的类型,修改约束 - 使用情况很少</p>
</li>
<li><p>rename to - 修改表名</p>
</li>
<li><p>comment - 创建列的时候加上注释</p>
</li>
<li><p>truncate - 清空整张表</p>
</li>
</ol>
<h3 id="ORM思想"><a href="#ORM思想" class="headerlink" title="ORM思想"></a>ORM思想</h3><p>Object-Relational-Mapping - 对象关系映射</p>
<p>需要用到OO思想[第一步找出对象,分析对象的属性,分析对象的功能,考虑对象之间的关系]来进行实体类的设计 - 数据库的设计</p>
<p><strong>掌握目标 - 看到实体类-&gt;表结构;看到表结构-&gt;实体类</strong></p>
<p>映射规则:</p>
<ol>
<li><p>实体类 - 表名</p>
</li>
<li><p>对象标识(id) - 主键(id) - primary key - <strong>非空且唯一</strong></p>
</li>
<li><p>普通属性 - 普通列[推荐俩者的名称保持一致.需要注意的是如果列是多个名称[匈牙利] - 小驼峰]</p>
</li>
<li><p>对象之间的关系 - 外键(foreign key) - 表与表之间是通过<strong>外键</strong>来进行关联.[进行关联查询的基础]</p>
<p><strong>通常情况下某张表的外键是指向另外一张表的主键的.</strong></p>
</li>
</ol>
<h3 id="对象之间的关系"><a href="#对象之间的关系" class="headerlink" title="对象之间的关系"></a>对象之间的关系</h3><p>分析一个”小米商城”,利用OO思想,找出业务中的关键对象</p>
<ul>
<li><p>登录,注册 - “用户User对象” - (id,phone,password,login_time,login_ip)</p>
</li>
<li><p>个人中心 - 其中有一块是用来负责展示用户的详情UserInfo</p>
</li>
<li><p>产品</p>
</li>
<li><p>产品详情</p>
</li>
<li><p>购物车 - id,商品id,商品名称,商品单价,num,小计算,总价,备注</p>
</li>
<li><p>订单 - 一个用户拥有多个订单,一个订单只能属于一个用户</p>
</li>
<li><p>产品分类表</p>
<p>1:N</p>
<p>N:N</p>
</li>
</ul>
<h4 id="1-1"><a href="#1-1" class="headerlink" title="1:1"></a>1:1</h4><p>User和UserInfo:一个用户匹配一个用户详情,一个用户详情仅属于一个用户</p>
<p>强调的是平等性 - 表设计中,外键可以出现在任何一方表中.</p>
<p>原则 - 能用单向关联解决的业务就不要使用双向关联</p>
<ol>
<li><p>java实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">先阶段的思想 - 实体类中没有外键的概念</span><br><span class="line">关系具有方向性</span><br><span class="line">单向关联 - 关系的维护仅仅在其中一方存在</span><br><span class="line">   </span><br><span class="line"> </span><br><span class="line"><span class="comment">// 情况一</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">// 一个用户拥有一个用户详情对象</span></span><br><span class="line">    <span class="keyword">private</span> UserInfo userInfo;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String header;</span><br><span class="line">    <span class="keyword">private</span> Gender sex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 情况二</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String header;</span><br><span class="line">    <span class="keyword">private</span> Gender sex;</span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ORM思想的精髓 - 如何进行映射以及为什么需要这种思想</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 双向关联[不建议]</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> UserInfo userInfo;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String header;</span><br><span class="line">    <span class="keyword">private</span> Gender sex;</span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>表设计</p>
<p>情况一:</p>
<p>user表</p>
<table>
<thead>
<tr>
<th>id</th>
<th>phone</th>
<th>password</th>
<th>user_info_id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>110</td>
<td>123456</td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>111</td>
<td>123456</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>112</td>
<td>123456</td>
<td>3</td>
</tr>
</tbody></table>
<p>user_info表</p>
<table>
<thead>
<tr>
<th>id</th>
<th>header</th>
<th>sex</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>xx.png</td>
<td>f</td>
</tr>
<tr>
<td>2</td>
<td>tt.png</td>
<td>m</td>
</tr>
<tr>
<td>3</td>
<td>zz.png</td>
<td>f</td>
</tr>
</tbody></table>
<p>情况二:</p>
<p>user表</p>
<table>
<thead>
<tr>
<th>id</th>
<th>phone</th>
<th>password</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>110</td>
<td>123456</td>
</tr>
<tr>
<td>2</td>
<td>111</td>
<td>123456</td>
</tr>
<tr>
<td>3</td>
<td>112</td>
<td>123456</td>
</tr>
</tbody></table>
<p>user_info表</p>
<table>
<thead>
<tr>
<th>id</th>
<th>header</th>
<th>sex</th>
<th>user_id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>xx.png</td>
<td>f</td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>tt.png</td>
<td>m</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>yy.png</td>
<td>f</td>
<td>3</td>
</tr>
</tbody></table>
</li>
</ol>
<h4 id="1-N"><a href="#1-N" class="headerlink" title="1:N"></a>1:N</h4><p>一个用户对象和购物车对象</p>
<p>一个用户可以拥有多个购物车对象,但是一个购物车对象只能属于一个用户</p>
<p><strong>外键存储在多的那一方</strong></p>
<ol>
<li><p>实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单向关联1</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="comment">// 普通属性</span></span><br><span class="line">    <span class="comment">// 一个用户可以拥有多个购物车对象</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;Cart&gt; carts;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cart</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 单向关联2</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="comment">//普通属性</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cart</span></span>&#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// 一个购物车只能属于一个用户</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 双向关联</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;Cart&gt; carts;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cart</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>推荐使用第一种单向关联的方式</p>
</blockquote>
</li>
<li><p>表结构</p>
<p>user表</p>
<table>
<thead>
<tr>
<th>id</th>
<th>phone</th>
<th>password</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>110</td>
<td>123</td>
</tr>
<tr>
<td>2</td>
<td>114</td>
<td>123</td>
</tr>
<tr>
<td>3</td>
<td>115</td>
<td>123</td>
</tr>
</tbody></table>
<p>购物车cart表</p>
<table>
<thead>
<tr>
<th>id</th>
<th>product_id</th>
<th>product_name</th>
<th>user_id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
<td>mi01</td>
<td>3</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>mi02</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
<td>mi02</td>
<td>2</td>
</tr>
</tbody></table>
</li>
</ol>
<h4 id="N-N"><a href="#N-N" class="headerlink" title="N:N"></a>N:N</h4><p>需要拆分成两个一对多</p>
<p>一个学生可以选择多门课程,一个课程可以被多个学生选择</p>
<p>一个客户可以购买多个商品,一个商品可以被多个用户购买</p>
<p>customer表</p>
<table>
<thead>
<tr>
<th>id</th>
<th>cname</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>admin</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>tom</td>
<td></td>
</tr>
</tbody></table>
<p>product表</p>
<table>
<thead>
<tr>
<th>id</th>
<th>pname</th>
<th>price</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>mac</td>
<td>100000</td>
</tr>
<tr>
<td>2</td>
<td>xiaomi</td>
<td>8000</td>
</tr>
<tr>
<td>3</td>
<td>huawei</td>
<td>8000</td>
</tr>
<tr>
<td>4</td>
<td>联想</td>
<td>7000</td>
</tr>
</tbody></table>
<p>需要建立第三方表,来确定customer表和product表的关系.N:N–&gt;拆分成两个1:N</p>
<p>purchase表 -&gt; 购买表</p>
<p>采用的是<strong>联合主键[组合主键]</strong></p>
<p><strong>主键-primary key - 非空且唯一.作用:用来确定唯一元组[行]</strong></p>
<p>所谓的”俩个1:n” - <strong>customer表和purcase表</strong>以及<strong>product表和purcase表</strong></p>
<ol>
<li>一个客户拥有多条购买记录[1:N]</li>
<li>一个产品拥有多条被购买记录[1:N]</li>
</ol>
<p>主键列未必是单列[常见的id列] , N:N场景可以采取联合主键,主键列由俩列共同组成**(customer_id,product_id)**</p>
<p><strong>外键列通常情况是引入另外一张表的主键列.在该表中.外键列有2列</strong></p>
<p><strong>分别是customer_id 引用了customer表中的id列</strong></p>
<p><strong>product_id引用了product表中的id列</strong></p>
<table>
<thead>
<tr>
<th>customer_id</th>
<th>product_id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>2</td>
<td>4</td>
</tr>
</tbody></table>
<p>另一种情况关于主键的选择.第三方表[用来维护关系的表],开发的时候,还是推荐给这张自己一个<strong>单独的主键列</strong></p>
<table>
<thead>
<tr>
<th>id</th>
<th>customer_id</th>
<th>product_id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>5</td>
<td>2</td>
<td>4</td>
</tr>
</tbody></table>
<h4 id="自关联"><a href="#自关联" class="headerlink" title="自关联"></a>自关联</h4><p>当前表的外键列自关联到了自己表中的主键列</p>
<p>s_emp</p>
<table>
<thead>
<tr>
<th>id</th>
<th>first_name</th>
<th>manager_id[上司id]</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>Carmen</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>Mark</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>tom</td>
<td>1</td>
</tr>
<tr>
<td>4</td>
<td>admin</td>
<td>2</td>
</tr>
<tr>
<td>5</td>
<td>jack</td>
<td>2</td>
</tr>
</tbody></table>
<h3 id="分析评论业务"><a href="#分析评论业务" class="headerlink" title="分析评论业务"></a>分析评论业务</h3><p>以抖音为例 - User - Video</p>
<p>关注评论功能.一个用户可以评论多个视频,一个视频可以被多个用户评论 - N:N</p>
<p>User表</p>
<table>
<thead>
<tr>
<th>id</th>
<th>phone</th>
<th>password</th>
<th>username</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>110</td>
<td>123</td>
<td>qwq</td>
</tr>
<tr>
<td>2</td>
<td>111</td>
<td>123</td>
<td>qaq</td>
</tr>
<tr>
<td>3</td>
<td>112</td>
<td>123</td>
<td>ovo</td>
</tr>
</tbody></table>
<p>Video表</p>
<p>一个用户可以发布多个视频,但是一个视频只能由一个用户去发布 1:N</p>
<table>
<thead>
<tr>
<th>id</th>
<th>视频标题</th>
<th>视频点赞量</th>
<th>user_id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>吴老师</td>
<td>100万+</td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>霍老师</td>
<td>2000+</td>
<td>1</td>
</tr>
<tr>
<td>3</td>
<td>翟老师</td>
<td>18</td>
<td>1</td>
</tr>
</tbody></table>
<p>评论表 - 重点体现出谁评论了哪个视频即可. </p>
<p>外键列是可以为空的</p>
<table>
<thead>
<tr>
<th>id</th>
<th>视频id</th>
<th>user_id</th>
<th>评论内容</th>
<th>comment_pid</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
<td>4</td>
<td>无语了</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>5</td>
<td>渣男</td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>2</td>
<td>彼此彼此</td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>1</td>
<td>6</td>
<td>就是啊</td>
<td>1</td>
</tr>
</tbody></table>
<p>user_id=6的评论不是直接对视频进行评论的,属于第二层评论,它是对user_id=4的人进行评论的.</p>
<p>除了评论还有回复</p>
<p>第一层 - 评论表的数据</p>
<p>第二层 - 对第一层的评论继续评论</p>
<p>第三层 - 对第二层以及其以后的评论/回复 - 叫做回复</p>
<p>回复表</p>
<p>一个评论可以引起多个回复 - reply</p>
<table>
<thead>
<tr>
<th>id</th>
<th>comment_id</th>
<th>content</th>
<th>replay_id</th>
<th>user_id</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>4</td>
<td>真不明白怎么会有这样的人</td>
<td></td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>4</td>
<td>这种人真的无语了</td>
<td>1</td>
<td>2</td>
</tr>
</tbody></table>
<p>结构:</p>
<p>user_id=1的用户发视频</p>
<p>user_id=4: 无语了</p>
<p>​    user_id=6: 就是啊</p>
<p>​    user_id=1回复了user_id=6:  真不明白怎么会有这样的人</p>
<p>​    user_id=2回复了user_id=1: 这种人真的无语了</p>
<h2 id="表设计-三大范式"><a href="#表设计-三大范式" class="headerlink" title="表设计 - 三大范式"></a>表设计 - 三大范式</h2><p>表设计一定<strong>尽可能去遵守三大范式</strong></p>
<p>作用:指导db的设计更加合理化,避免数据的冗余.</p>
<h3 id="第一范式"><a href="#第一范式" class="headerlink" title="第一范式"></a>第一范式</h3><p><strong>1NF:保证列的原子性,列不可再分割</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">s_emp(id,name);</span><br><span class="line">但是发现外国的name比较特殊.发现name列是可再分割的.不符合1NF.需要对name进行切割</span><br><span class="line">s_emp(id,first_name,last_name);</span><br><span class="line"></span><br><span class="line">address只需要包含省市区</span><br><span class="line">school(id,name,address);</span><br><span class="line">1  苏州大学  		江苏省苏州市工业园区</span><br><span class="line">2  常州大学  		江苏省常州市武进区</span><br><span class="line">3  苏州科技学院  江苏省苏州市高新区</span><br><span class="line"></span><br><span class="line">school(id,name,province,city,area);</span><br></pre></td></tr></table></figure>

<h3 id="第二范式"><a href="#第二范式" class="headerlink" title="第二范式"></a>第二范式</h3><p><strong>2NF:基于1NF,不存在非关键列部分依赖于关键列,非关键列要全部依赖于关键列.</strong></p>
<p>关键列 - 主键列; 非关键列 - 非主键列.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">-- student,course表 - 所有的信息合并到一张表了.</span><br><span class="line">--1. student信息以及course信息都会存在数据的冗余性</span><br><span class="line">-- 如何确定主键列[单列,组合形式] - 能够确定唯一的一条行记录 - sid,cid</span><br><span class="line"></span><br><span class="line">-- db设计中,并不是表的数量或者列的数量越少越好的 - 满足三大范式</span><br><span class="line">-- 关键列(sid,cid),非关键列(sname,cname)</span><br><span class="line">-- ①(sid,cid) -&gt; 唯一确定 sname</span><br><span class="line">		 实际上如果关键列中的部分列sid就可以确定了sname的值</span><br><span class="line">		 sname只需要由关键列(sid,cid)中的部分列[也就是sid列]就可以确定了.</span><br><span class="line">		 存在了非关键列sname部分依赖于关键列,违背了2NF</span><br><span class="line">-- ②(sid,cid) -&gt; 唯一确定 cname</span><br><span class="line">student_course(sid,sname,cid,cname)</span><br><span class="line">sid  sname  cid  cname</span><br><span class="line">1     tom    1    java</span><br><span class="line">1     tom    2    python</span><br><span class="line">2     admin  1    java</span><br><span class="line">2     admin  3    jack</span><br><span class="line"></span><br><span class="line">为了满足2NF</span><br><span class="line">student(sid,sname);//学生表 sid-&gt;sname</span><br><span class="line">course(cid,cname);//课程表  cid-&gt;cname</span><br><span class="line">sc(sid,cid,score);//选课表  (sid,cid)-&gt; score</span><br></pre></td></tr></table></figure>

<h3 id="第三范式"><a href="#第三范式" class="headerlink" title="第三范式"></a>第三范式</h3><p><strong>3NF:基于2NF,不存在非关键列传递依赖于关键列,所有的非关键列要直接依赖于关键列</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">student(id,sname,uno,uname,address)</span><br><span class="line">1  tom   x1001  苏州大学 江苏省</span><br><span class="line">2  jack  x1002  社会大学 东北省</span><br><span class="line">3  james x1001  苏州大学 江苏省</span><br><span class="line"></span><br><span class="line">关键列只有id列</span><br><span class="line">①关键列id可以直接确定一个唯一的uno的</span><br><span class="line">②uno又可以直接确定唯一的一个uname</span><br><span class="line">③给定一个学生的id,也是可以确定一个唯一的uname</span><br><span class="line"></span><br><span class="line">id -&gt; uno -&gt; uname  =&gt; id -&gt; uname</span><br><span class="line">uname是间接被id确定下来的-uname是间接依赖[通过一个uno传递依赖]于关建列id.</span><br><span class="line">违背了3NF,存在了非关键列传递依赖于关键列.</span><br><span class="line"></span><br><span class="line">所有的非关键列要直接依赖于关键列 - 所有的非关键列应该是直接被关键列来确定的.</span><br><span class="line"></span><br><span class="line">修改 - 拆分</span><br><span class="line">student(id,sname,uid);//uid就是大学的id</span><br><span class="line">id -&gt; uid(引用university表中的id列)</span><br><span class="line"></span><br><span class="line">university(id,uno,uname,adress)</span><br><span class="line">uid-&gt;uname</span><br></pre></td></tr></table></figure>

<h2 id="建表"><a href="#建表" class="headerlink" title="建表"></a>建表</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">  列名 数据类型[(长度)],</span><br><span class="line">  列2  数据类型[(长度)],</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">  列  数据类型[(n)]</span><br><span class="line">)ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- mysql5.7及其以上可以省略了ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class="line">-- 前提是my.ini文件配置好了</span><br><span class="line">-- 指定我们的数据的存储引擎InnoDB,表编码是utf8</span><br></pre></td></tr></table></figure>

<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>列的数据类型就是用来限制你将来插入数据到该列的限制.该列是什么类型,就需要插入什么类型的数据</p>
<ol>
<li><p>数字相关的</p>
<p>a. 整数 - int和bigint</p>
<p>b. 小数 - float,double[使用最多],decimal</p>
<p>笔试题中:TINYINT(1个字节)或者smallint(2个字节)</p>
</li>
<li><p>字符串相关的 - mysql中字符串是用单引号表示的</p>
<p>a. char(n)    -  固定长度 - 0-255 bytes[ascill]</p>
<p>b. varchar(n) - 可变长度 - 0-65535 bytes[unicode的范围]</p>
<p>c. text - 长文本数据</p>
<p>笔试题中:mysql中char和varchar的区别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">数字5代表的是该列可以存储的字符串的个数.不是代表字节数</span><br><span class="line">char(5) - 定长字符的意思是即时该列仅仅保存一个字母&#x27;a&#x27;,那么在内存中,char的实际消耗的长度就是5个 - &quot;浪费&quot;   对char类型的列的读写操作效率高于varchar</span><br><span class="line"></span><br><span class="line">varchar(5) - 可变长度[最大可保存的字符串的长度],实际存储了一个字母&#x27;a&#x27;.实际也就只消耗了一个1长度 - &quot;节约了内存&quot; - 按需分配.</span><br><span class="line"></span><br><span class="line">因此,开发中尽可能字符串使用varchar,而不使用char.</span><br></pre></td></tr></table></figure></li>
<li><p>日期</p>
<p>a. date -&gt; 即使保存的是年月日时分秒,查询出来的也仅仅只会显示到<strong>年月日</strong></p>
<p>b. datetime-&gt;年月日时分秒.即使保存的数据仅仅是年月日.但是查询出来的时候,可以显示年月日时分秒</p>
</li>
</ol>
<h3 id="建表demo"><a href="#建表demo" class="headerlink" title="建表demo"></a>建表demo</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">drop table tbl_product;</span><br><span class="line">create table tbl_product(</span><br><span class="line">	id int(3),</span><br><span class="line">  name varchar(20),</span><br><span class="line">  create_time date,</span><br><span class="line">  price double(10,2)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 分析括号中的参数</span><br><span class="line">-- int(3)-并不会影响该列可插入数据的一个范围.范围仍然是int型的范围</span><br><span class="line">-- 为了看出来int(3),修改一下建表语句</span><br><span class="line">-- int(13)想要看出来效果,这个列一定要加上zerofill,不足位数的用0填充</span><br><span class="line">create table tbl_product(</span><br><span class="line">	id int(13) zerofill,</span><br><span class="line">  name varchar(20),</span><br><span class="line">  create_time date,</span><br><span class="line">  price double(7,2)</span><br><span class="line">);</span><br><span class="line">mysql&gt; insert into tbl_product values(1234,&#x27;tom&#x27;,now(),123.45);</span><br><span class="line">mysql&gt; select * from tbl_product;</span><br><span class="line">+---------------+------+-------------+--------+</span><br><span class="line">| id            | name | create_time | price  |</span><br><span class="line">+---------------+------+-------------+--------+</span><br><span class="line">| 0000000001234 | tom  | 2021-08-19  | 123.45 |</span><br><span class="line">+---------------+------+-------------+--------+</span><br><span class="line">总结:int(n)此处的n不会影响插入到该列的数据的大小.那么n是配合zerofill来进行的.查询的时候,不足n位的数字全部用0填充.</span><br><span class="line"></span><br><span class="line">-- 修改表结构-测试varchar(n)中的n - 个数</span><br><span class="line">create table tbl_product(</span><br><span class="line">	id int(7),</span><br><span class="line">  name varchar(2),</span><br><span class="line">  create_time date,</span><br><span class="line">  price double(10,2)</span><br><span class="line">);</span><br><span class="line">-- 如果varchar(n)设置成了2,但是插入了&#x27;tom&#x27;,报错</span><br><span class="line">-- ERROR 1406 (22001): Data too long for column &#x27;name&#x27; at row 1</span><br><span class="line">mysql&gt; insert into tbl_product values(1,&#x27;tom&#x27;,now(),123.45);</span><br><span class="line">-- 总结:varchar(n) - 中的n是代表的是字符的个数[一个汉字就是代表一个]</span><br><span class="line"></span><br><span class="line">-- double(m,n)</span><br><span class="line">-- m代表的是总长度,n代表的是精度 - double(7,2)</span><br><span class="line">create table tbl_product(</span><br><span class="line">	id int(7),</span><br><span class="line">  name varchar(20),</span><br><span class="line">  create_time date,</span><br><span class="line">  price double(7,1)</span><br><span class="line">);</span><br><span class="line">mysql&gt; insert into tbl_product values(2,&#x27;admin&#x27;,&#x27;2021-10-01&#x27;,123456.56789);</span><br><span class="line">-- double(7,2) -&gt; 7就是总的长度,2代表的精度[四舍五入] - 123456.56789 </span><br><span class="line">-- 插入失败了 - Out of range value for column &#x27;price&#x27; at row 1</span><br><span class="line">-- 插入失败的原因是123456.57 -&gt; 这个结果已经超过了总的长度7了.</span><br><span class="line"></span><br><span class="line">-- 修改double(7,1) -&gt; 123456.56789 -&gt; 123456.6 -&gt; 仍然没有超过7这个总的长度的. - 可以被插入进去的</span><br></pre></td></tr></table></figure>

<blockquote>
<p>分析括号中的参数.</p>
<p>int(n) 并不会影响该列可插入数据的一个范围,范围仍然是int型的范围.n是配合zerofill来进行的.查询的时候,不足n位的数字全部用0填充.</p>
<p>varchar(n)中的n代表的是字符的个数[一个汉字就代表一个],如果超过了就会报错.</p>
<p>double(m,n)m代表的是总长度,n代表的是精度 </p>
<p>例如double(7,2)最大可以插入的长度的例子是12345.67</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show tables;</span><br><span class="line">mysql&gt; desc tables;</span><br><span class="line">-- 查看建表语句</span><br><span class="line">mysql&gt; show create table tbl_product</span><br><span class="line"></span><br><span class="line"> CREATE TABLE `tbl_product` (</span><br><span class="line">   `id` int(7) DEFAULT NULL,</span><br><span class="line">   `name` varchar(20) DEFAULT NULL,</span><br><span class="line">   `create_time` date DEFAULT NULL,</span><br><span class="line">   `price` double(3,2) DEFAULT NULL</span><br><span class="line"> ) ENGINE=InnoDB DEFAULT CHARSET=utf8 </span><br></pre></td></tr></table></figure>

<h2 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h2><p>在不考虑外键因素的情况下,是可以直接删除表的.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE 表名;</span><br></pre></td></tr></table></figure>

<h2 id="约束constraint"><a href="#约束constraint" class="headerlink" title="约束constraint"></a>约束constraint</h2><p>作用:在插入到表中列的数据进行进一步的限制</p>
<h3 id="约束类型"><a href="#约束类型" class="headerlink" title="约束类型"></a>约束类型</h3><ol>
<li>主键约束[primary key] - 非空且唯一,用来确定唯一的行记录 – pk</li>
<li>非空约束[not null] - 非空 - 该列不能为null,比如插入值或给定一个默认值 - nn</li>
<li>唯一约束[unique] - 唯一性 - nq</li>
<li>外键约束[foreign key] - 表与表之间的关系是通过外键来维护的,外键列一般是对应某张表的主键列,可以为null - fk</li>
</ol>
<h3 id="列级添加"><a href="#列级添加" class="headerlink" title="列级添加"></a>列级添加</h3><p>优点:比较简单,缺点:不能给约束取名字</p>
<p>语法:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">列名 数据类型[(长度)] [约束类型1],</span><br><span class="line">列2  数据类型[(长度)] [约束类型2],</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">列  数据类型[(n)]</span><br><span class="line">)ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">drop table tbl_product;</span><br><span class="line">create table tbl_product(</span><br><span class="line">    id int(7) primary key comment &#x27;产品的id&#x27;,</span><br><span class="line">    name varchar(20) not null unique comment &#x27;产品的名称&#x27;,</span><br><span class="line">    create_date date not null default &#x27;2021-7-20&#x27;,</span><br><span class="line">    price double(7,2) not null</span><br><span class="line">);</span><br><span class="line">-- 注意类型为date的时候默认值不能为now();类型为datetime才可以为now()</span><br></pre></td></tr></table></figure>

<p>演示约束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">insert into tbl_product(id,name,price) values(1,&#x27;tom&#x27;,123.567);</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from tbl_product;</span><br><span class="line">+----+------+-------------+--------+</span><br><span class="line">| id | name | create_date | price  |</span><br><span class="line">+----+------+-------------+--------+</span><br><span class="line">|  1 | tom  | 2019-01-01  | 123.57 |</span><br><span class="line">+----+------+-------------+--------+</span><br><span class="line"></span><br><span class="line">-- 继续插入一个id也是1的值</span><br><span class="line">insert into tbl_product(id,name,price) values(1,&#x27;admin&#x27;,123.567);</span><br><span class="line">ERROR 1062 (23000): Duplicate entry &#x27;1&#x27; for key &#x27;PRIMARY&#x27;</span><br><span class="line">-- 违背了primary key主键约束的规则 - 重复了.</span><br><span class="line"></span><br><span class="line">-- not null</span><br><span class="line">-- 没有给price插入值,但是该列存在一个not null非空约束</span><br><span class="line">insert into tbl_product(id,name) values (2,&#x27;tom&#x27;);</span><br><span class="line">-- ERROR 1364 (HY000): Field &#x27;price&#x27; doesn&#x27;t have a default value</span><br><span class="line"></span><br><span class="line">-- unique 唯一性,表中已经存在了一行记录是tom</span><br><span class="line">insert into tbl_product(id,name,price) values(2,&#x27;tom&#x27;,12.3);</span><br><span class="line">-- name字段/列值重复了.</span><br><span class="line">ERROR 1062 (23000): Duplicate entry &#x27;tom&#x27; for key &#x27;name&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="表级添加"><a href="#表级添加" class="headerlink" title="表级添加"></a>表级添加</h3><p>优点:可以给约束命名,列级是不支持给列取名称的.</p>
<p>但<strong>not null 非空约束以及default仅仅支持列级添加的方式</strong></p>
<p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[constraint 约束名称] 约束类型(列)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">drop table tbl_product;</span><br><span class="line">create table tbl_product(</span><br><span class="line">    id int(7),</span><br><span class="line">    name varchar(20) not null,</span><br><span class="line">    create_date date not null default &#x27;2019-1-1&#x27;,</span><br><span class="line">    price double(7,2) not null,</span><br><span class="line">    constraint tbl_product_id_pk primary key(id),</span><br><span class="line">    unique(name)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><p>foreign key - 简称fk.用来确定表之间的关系的.外键通常是是在多的一方.</p>
<p>1.1:N或1:1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">drop table tbl_user;</span><br><span class="line">create table tbl_user(</span><br><span class="line">    id int(7) primary key,</span><br><span class="line">    username varchar(20) not null unique</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">insert into tbl_user values(1,&#x27;tom&#x27;);</span><br><span class="line">insert into tbl_user values(2,&#x27;admin&#x27;);</span><br><span class="line"></span><br><span class="line">drop table tbl_video;</span><br><span class="line">create table tbl_video(</span><br><span class="line">    id int(7) primary key,</span><br><span class="line">    title varchar(20),</span><br><span class="line">    likes int(7),</span><br><span class="line">    create_time datetime default now(),</span><br><span class="line">    tbl_user_id int(7) references tbl_user(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 一旦创建了约束,插入数据的时候需要注意的是.</span><br><span class="line">-- 外键列是允许为空的.</span><br><span class="line">insert into tbl_video values(1,&#x27;学好myql&#x27;,100,now(),1);</span><br><span class="line">insert into tbl_video values(2,&#x27;学好java&#x27;,100,now(),1);</span><br><span class="line">insert into tbl_video values(3,&#x27;学习jdbc&#x27;,100,now(),2);</span><br><span class="line"></span><br><span class="line">-- 注意.既然已经定义了外键的约束.那么插入数据的时候,引用的外键列的值在另外一张表中一定要有行记录的</span><br><span class="line">-- tbl_user表中是不存在id=3的行记录的</span><br><span class="line">insert into tbl_video values(3,&#x27;mysql太简单了&#x27;,100,now(),3);</span><br><span class="line"></span><br><span class="line">-- 报错</span><br><span class="line">ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`j03s`.`tbl_video`, CONSTRAINT `tbl_video_table_user_id_fk` FOREIGN KEY (`tbl_user_id`) REFERENCES `tbl_user` (`id`))</span><br></pre></td></tr></table></figure>

<p>2.N:N</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">-- 评论表 一个用户可以对多个视频进行评论,一个视频可以被多个用户进行评论</span><br><span class="line">-- 拆分成两个1:N</span><br><span class="line"></span><br><span class="line">-- 组合主键+外键约束(表级添加)</span><br><span class="line">drop table tbl_comment;</span><br><span class="line">create table tbl_comment(</span><br><span class="line">  user_id int(7),</span><br><span class="line">  video_id int(7),</span><br><span class="line">  content varchar(50),</span><br><span class="line">  comment_id int(7),</span><br><span class="line">    constraint tbl_comment_user_id_pk primary key(user_id,video_id),</span><br><span class="line">    constraint tbl_comment_user_id_fk foreign key(user_id) references tbl_user(id),</span><br><span class="line">    constraint tbl_comment_video_id_fk foreign key(video_id) references tbl_video(id)</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line">-- 评论表拥有独立的主键id + 外键约束(列级添加)</span><br><span class="line">drop table tbl_comment;</span><br><span class="line">create table tbl_comment(</span><br><span class="line">    id int(7) primary key,</span><br><span class="line">    user_id int(7) references tbl_user(id),</span><br><span class="line">    video_id int(7) references tbl_user(id),</span><br><span class="line">    content varchar(50),</span><br><span class="line">    comment_id int(7) references tbl_comment(comment_id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">insert into tbl_comment(id,user_id,video_id,content) values(1,1,1,&#x27;好的,我会学会mysql的&#x27;);</span><br><span class="line">insert into tbl_comment values(2,2,1,&#x27;好的,我会学会mysql的&#x27;,1);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>建议还是使用constraint,不然有错误都不知道.</p>
</blockquote>
<h3 id="建表补充"><a href="#建表补充" class="headerlink" title="建表补充"></a>建表补充</h3><p>由一张表来构建另一张表</p>
<ol>
<li><p>保留原表的表结构+数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create table 表名 select 语句;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">drop table video_copy;</span><br><span class="line">create table video_copy select * from tbl_video;</span><br><span class="line"></span><br><span class="line">drop table video_copy;</span><br><span class="line">create table video_copy select id,tilte from tbl_video;</span><br></pre></td></tr></table></figure></li>
<li><p>保留原表的表结构,但是不需要原表的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">drop table video_copy;</span><br><span class="line">create table video_copy select id,title from tbl_video where 1=2;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h1><p>insert 插入数据</p>
<p>delete 删除数据</p>
<p>update 更新数据</p>
<h3 id="插入语句"><a href="#插入语句" class="headerlink" title="插入语句"></a>插入语句</h3><ol>
<li><p>语法一:给表中所有的列添加数据</p>
<p><strong>插入的列值要和建表语句中列顺序以及列的类型以及列的约束高度保持一致.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO 表名 VALUES(列值1,列值2,列值3,..,列值N)</span><br></pre></td></tr></table></figure></li>
<li><p>语法二:给表中的指定列插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO 表名(列名1,列名2) VALUES(列值1,列值2);</span><br></pre></td></tr></table></figure></li>
<li><p><strong>insert into 表名 select 语句</strong></p>
<p>把查询结果的数据插入到该表中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 统计视频的被评论的用户量,并且保存到另外一张表中 video_id,comment_num</span><br><span class="line">drop table comment_aly;</span><br><span class="line">create table comment_aly(</span><br><span class="line">	 video_id int(7),</span><br><span class="line">    comment_num int(7)</span><br><span class="line">);</span><br><span class="line">insert into comment_aly select video_id,count(user_id) from tbl_comment group by video_id;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="auto-increment"><a href="#auto-increment" class="headerlink" title="auto_increment"></a>auto_increment</h3><p>mysql中的主键的生成策略 - 自增长策略 - auto_increment[默认的是从1开始,步长为1]</p>
<p>oracle中的主键的生成策略 - 自增长 - sequence</p>
<p>应用场景:以后插入的时候[除非是模拟数据],id肯定是后台自动生成 - 唯一性.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">drop table comment_aly;</span><br><span class="line">create table comment_aly(</span><br><span class="line">    id int(7) primary key auto_increment,</span><br><span class="line">    video_id int(7),</span><br><span class="line">    comment_num int(7)</span><br><span class="line">);</span><br><span class="line">insert into comment_aly(video_id,comment_num) select video_id,count(user_id) from tbl_comment group by video_id;</span><br></pre></td></tr></table></figure>

<p><strong>mysql中提供了一个函数last_insert() 查看最后一个id插入的数据</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select last_insert_id();</span><br></pre></td></tr></table></figure>

<p><strong>希望模拟数据的时候接着使用这个自增长,那么修改自增长的初始值</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table comment_aly auto_increment=8;</span><br><span class="line">insert into comment_aly(video_id,comment_num) values(1,3);</span><br></pre></td></tr></table></figure>

<h3 id="删除语句"><a href="#删除语句" class="headerlink" title="删除语句"></a>删除语句</h3><ol>
<li><p>清空表 - delete语句不带where</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">delete from 表名;</span><br><span class="line"></span><br><span class="line">delete from video_copy;</span><br></pre></td></tr></table></figure></li>
<li><p>带条件的删除 - 删除1条,不删除,删除多条</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">delete from 表名 where语句;</span><br><span class="line"></span><br><span class="line">-- 删除video_copy表中id=2的行记录</span><br><span class="line">delete from video_copy where id=2;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="更新语句"><a href="#更新语句" class="headerlink" title="更新语句"></a>更新语句</h3><ol>
<li><p>更新的整张表的数据 - 不带where语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">语法:</span><br><span class="line">-- 更新所有的行的单列</span><br><span class="line">update 表名 set 列名=新的列值;</span><br><span class="line"></span><br><span class="line">-- 更新所有的行的多列.</span><br><span class="line">update 表名 set 列1=新的列值1,列2=新的列值2,列n=新的列值n;</span><br><span class="line"></span><br><span class="line">-- 比如更新video_copy表中的likes</span><br><span class="line">update video_copy set likes=likes*1.1;</span><br><span class="line"></span><br><span class="line">-- 比如更新video_copy表中的likes和title</span><br><span class="line">update video_copy set likes=200,title=&#x27;java无敌&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><p>更新指定条件的行记录 - where语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">更新id=2的title</span><br><span class="line">update video_copy set title=&#x27;python不错&#x27; where id=2;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="约束注意点"><a href="#约束注意点" class="headerlink" title="约束注意点"></a>约束注意点</h2><ol>
<li> 先删除多的一方表,再删除的一的一方的表</li>
<li> 删除行记录的时候,需要先把这个行记录在其他表中被引用的行记录要全部删除之后,才能删除自己.</li>
<li> 创建表的时候,应该先创建一的一方,然后创建多的一方</li>
</ol>
<h3 id="删除表-1"><a href="#删除表-1" class="headerlink" title="删除表"></a>删除表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">-- 删除表不是随意删除的 - 前提是创建了外键约束</span><br><span class="line">--  先删除多的一方表,再删除的一的一方的表</span><br><span class="line">drop table tbl_comment;</span><br><span class="line">drop table tbl_user;</span><br><span class="line">drop table tbl_video;</span><br><span class="line"></span><br><span class="line">-- 用户表</span><br><span class="line">create table tbl_user(</span><br><span class="line">  id int(7) primary key,</span><br><span class="line">  username varchar(20) not null unique</span><br><span class="line">);</span><br><span class="line">insert into tbl_user values(1,&#x27;tom&#x27;);</span><br><span class="line">insert into tbl_user values(2,&#x27;admin&#x27;);</span><br><span class="line"></span><br><span class="line">-- 视频表</span><br><span class="line">create table tbl_video(</span><br><span class="line">	id int(7) primary key,</span><br><span class="line">  title varchar(20),</span><br><span class="line">  likes int(7),</span><br><span class="line">  create_time datetime default now(),</span><br><span class="line">  -- 外键列命名方式 表名_另外一张表的引用列名[主键列]</span><br><span class="line">  -- 外键列的数据类型和长度和你引用的地方保持一致</span><br><span class="line">  tbl_user_id int(7),</span><br><span class="line">  -- 表级添加</span><br><span class="line">  constraint tbl_video_table_user_id_fk foreign key(tbl_user_id) references tbl_user(id)</span><br><span class="line">);</span><br><span class="line">-- 一旦创建了约束,插入数据的时候需要注意的是.</span><br><span class="line">-- 外键列是允许为空的.</span><br><span class="line">insert into tbl_video values(1,&#x27;学好myql&#x27;,100,now(),1);</span><br><span class="line">insert into tbl_video values(2,&#x27;学好java&#x27;,100,now(),1);</span><br><span class="line">insert into tbl_video values(3,&#x27;学习jdbc&#x27;,100,now(),2);</span><br><span class="line"></span><br><span class="line">-- 评论表</span><br><span class="line">create table tbl_comment(</span><br><span class="line">	id int(7) primary key,</span><br><span class="line">  user_id int(7),</span><br><span class="line">  video_id int(7),</span><br><span class="line">  content varchar(50),</span><br><span class="line">  comment_id int(7),</span><br><span class="line">  constraint tbl_comment_user_id_fk foreign key(user_id) references tbl_user(id),</span><br><span class="line">  constraint tbl_comment_video_id_fk foreign key(video_id) references tbl_video(id),</span><br><span class="line">  constraint tbl_comment_id_fk foreign key(comment_id) references tbl_comment(id)</span><br><span class="line">);</span><br><span class="line">insert into tbl_comment(id,user_id,video_id,content) values(1,1,1,&#x27;好的,我会学会mysql的&#x27;);</span><br><span class="line">insert into tbl_comment values(2,2,1,&#x27;好的,我会学会mysql的&#x27;,1);</span><br></pre></td></tr></table></figure>

<p>分析删除表的顺序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 如果删除的是tbl_user或者tbl_video都会报错</span><br><span class="line">-- 报错的原因就是由外键约束存在导致的</span><br><span class="line"></span><br><span class="line">mysql&gt; drop table tbl_user;</span><br><span class="line">ERROR 1217 (23000): Cannot delete or update a parent row: a foreign key constraint fails</span><br><span class="line">mysql&gt; drop table tbl_video;</span><br><span class="line">ERROR 1217 (23000): Cannot delete or update a parent row: a foreign key constraint fails</span><br><span class="line"></span><br><span class="line">-- 应该要先删除子记录[外键所在的表中的记录],然后再删除父记录 - 先删除多的一方表,再删除的一的一方的表</span><br><span class="line">-- 多的一方的外键引用的是一的一方的主键.</span><br></pre></td></tr></table></figure>

<h3 id="删除行记录"><a href="#删除行记录" class="headerlink" title="删除行记录"></a>删除行记录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- id=2的用户是在tbl_comment中存在一条行记录的,它是被引用了.</span><br><span class="line">mysql&gt; delete from tbl_user where id=2;</span><br><span class="line">ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`j03s`.`tbl_comment`, CONSTRAINT `tbl_comment_user_id_fk` FOREIGN KEY (`user_id`) REFERENCES `tbl_user` (`id`))</span><br><span class="line"></span><br><span class="line">-- id=2的所有的评论的全部删除[删除子记录],然后再去删除id=2的用户</span><br><span class="line">mysql&gt; delete from tbl_comment where user_id=2;</span><br><span class="line"></span><br><span class="line">-- 然后才能去删除id=2的用户,已经把用户id=2这个用户的所有的评论全部删除了</span><br><span class="line">mysql&gt; delete from tbl_user where id=2;</span><br><span class="line"></span><br><span class="line">ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`j03s`.`tbl_video`, CONSTRAINT `tbl_video_table_user_id_fk` FOREIGN KEY (`tbl_user_id`) REFERENCES `tbl_user` (`id`))</span><br><span class="line"></span><br><span class="line">id=2的用户又发布了一条视频,它也在tbl_video表中被引用了.</span><br><span class="line">mysql&gt; delete from tbl_video where tbl_user_id=2;</span><br><span class="line"></span><br><span class="line">-- 等把id=2的用户的所有评论信息以及发布的视频全部删除完毕之后,才可以删除自己</span><br><span class="line">mysql&gt; delete from tbl_user where id=2;</span><br></pre></td></tr></table></figure>

<h3 id="约束的缺点"><a href="#约束的缺点" class="headerlink" title="约束的缺点"></a>约束的缺点</h3><p>外键约束 - 保证数据的完整性和一致性.缺点 - 表之间的关系越强烈[手动创建了约束条件] - 表之间的耦合越高.</p>
<p>在下周DB设计 - <strong>不要手动创建约束</strong> - 弱化表之间的关系 - <strong>“表的关系 - 心中”</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">驰星CRM系统 - 学生信息,项目经理信息</span><br><span class="line"></span><br><span class="line">-- 假设一个项目经理可以教多个学生</span><br><span class="line">-- dev_id是外键列</span><br><span class="line">student(id,sname,school,dev_id);</span><br><span class="line">1 杨晓轩 文正养老学院 2</span><br><span class="line">2 闫昊   八一农垦    1</span><br><span class="line">3 刘静   八一农垦    2</span><br><span class="line"></span><br><span class="line">dev(id,dev_name,age);</span><br><span class="line">1 success 18</span><br><span class="line">2 james  45</span><br><span class="line">3 小强    19</span><br><span class="line"></span><br><span class="line">如果建表的时候</span><br><span class="line">create table student(</span><br><span class="line">	//...</span><br><span class="line"></span><br><span class="line">foreign key(dv_id) references dev(id);</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 导致的后果,不能随意删除项目经理.项目经理只要有学生信息.就不能删除项目经理.</span><br><span class="line"></span><br><span class="line">-- 现实生活中 - success上台了,james开除了...</span><br><span class="line">mysql&gt; delete from dev where id=2;//删除失败了.因为james在student表中有子记录</span><br><span class="line">-- 要想删除james,需要删除他所有的学生.实际的业务 - 肯定不允许我去删除&quot;宝贵的学生信息&quot;</span><br><span class="line"></span><br><span class="line">-- 目标 - 1. 成功删除项目经理</span><br><span class="line">--       2. 知道学生曾经是哪个老师带过的.</span><br><span class="line"></span><br><span class="line">-- 因此,在建表的时候,其实是允许数据的冗余性的.</span><br><span class="line">drop table t_student;</span><br><span class="line">drop table dev;</span><br><span class="line">create table dev(</span><br><span class="line">	id int(7) primary key auto_increment,</span><br><span class="line">dev_name varchar(20),</span><br><span class="line">age int(3)</span><br><span class="line">);</span><br><span class="line">insert into dev values(1,&#x27;success&#x27;,18);</span><br><span class="line">insert into dev values(2,&#x27;james&#x27;,45);</span><br><span class="line"></span><br><span class="line">create table t_student(</span><br><span class="line">	id int(7) primary key auto_increment,</span><br><span class="line">sname varchar(20),</span><br><span class="line">school varchar(20),</span><br><span class="line">-- 此处没有进行约束的添加 - &quot;关系在心中即可&quot;</span><br><span class="line">dev_id int(7),</span><br><span class="line">-- 数据的冗余 - 防止项目经理的记录被删除</span><br><span class="line">dev_name varchar(20)</span><br><span class="line">);</span><br><span class="line">insert into t_student values(1,&#x27;杨晓轩&#x27;,&#x27;文正养老学院&#x27;,2,&#x27;james&#x27;);</span><br><span class="line">insert into t_student values(2,&#x27;闫昊&#x27;,&#x27;八一农垦&#x27;,1,&#x27;success&#x27;);</span><br><span class="line">insert into t_student values(3,&#x27;刘静&#x27;,&#x27;八一农垦&#x27;,1,&#x27;success&#x27;);</span><br><span class="line"></span><br><span class="line">-- 虽然没有给dev_id列创建约束,业务分析可以确定该列就是用来&quot;维护俩表之间的关系的&quot;</span><br><span class="line">-- 查询学生的姓名以及项目经理的姓名以及年龄</span><br><span class="line">mysql&gt; select s.sname,d.dev_name,d.age from t_student s join dev d on s.dev_id=d.id;</span><br><span class="line"></span><br><span class="line">-- 开除james,没有约束,可以直接删除</span><br><span class="line">mysql&gt; delete from dev where id=2;</span><br></pre></td></tr></table></figure>

<h2 id="物理删除和逻辑删除"><a href="#物理删除和逻辑删除" class="headerlink" title="物理删除和逻辑删除"></a>物理删除和逻辑删除</h2><ol>
<li><p>物理删除就是真正意义上的delete语句</p>
</li>
<li><p>逻辑删除 - 建议 - 比较安全</p>
<p>因为数据是不能随意删除的.数据是需要后台进行数据分析的.<strong>用户的端的删除大部分都是逻辑删除.</strong></p>
<p>实际上就是每张表都会增加逻辑列.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">drop table xx_del;</span><br><span class="line">create table xx_del(</span><br><span class="line">    id int(7) primary key,</span><br><span class="line">    name varchar(20),</span><br><span class="line">    status int(7)</span><br><span class="line">);</span><br><span class="line">insert into xx_del values(1,&#x27;tom&#x27;,0);</span><br><span class="line">insert into xx_del values(2,&#x27;admin&#x27;,1);</span><br><span class="line"></span><br><span class="line">-- 首页 - 加载xx_del表中所有的信息 [加载status=1的信息]</span><br><span class="line">select * from xx_del where status = 1;</span><br><span class="line"></span><br><span class="line">-- 删除按钮 - 逻辑删除 - 执行update</span><br><span class="line">update xx_del set status=0 where id=1;</span><br></pre></td></tr></table></figure></li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:2294014200@qq.com">sakura</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://beautifulboyy/2021/08/20/mysql02/">http://beautifulboyy/2021/08/20/mysql02/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://beautifulboyy" target="_blank">今晚你会梦到电子羊吗</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/DDL/">DDL</a><a class="post-meta__tags" href="/tags/DML/">DML</a></div><div class="post_share"><div class="social-share" data-image="/img/wlop012.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/08/21/mysql03/"><img class="prev-cover" src="/img/wlop012.jpg" onerror="onerror=null;src='/img/avatar.jpeg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">数据库DTL</div></div></a></div><div class="next-post pull-right"><a href="/2021/08/16/mysql01/"><img class="next-cover" src="/img/wlop012.jpg" onerror="onerror=null;src='/img/avatar.jpeg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">mysql基础</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">sakura</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">26</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#DDL"><span class="toc-number">1.</span> <span class="toc-text">DDL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E5%91%BD%E4%BB%A4"><span class="toc-number">1.0.1.</span> <span class="toc-text">SQL命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ORM%E6%80%9D%E6%83%B3"><span class="toc-number">1.0.2.</span> <span class="toc-text">ORM思想</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">1.0.3.</span> <span class="toc-text">对象之间的关系</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1"><span class="toc-number">1.0.3.1.</span> <span class="toc-text">1:1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-N"><span class="toc-number">1.0.3.2.</span> <span class="toc-text">1:N</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#N-N"><span class="toc-number">1.0.3.3.</span> <span class="toc-text">N:N</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%85%B3%E8%81%94"><span class="toc-number">1.0.3.4.</span> <span class="toc-text">自关联</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E8%AF%84%E8%AE%BA%E4%B8%9A%E5%8A%A1"><span class="toc-number">1.0.4.</span> <span class="toc-text">分析评论业务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E8%AE%BE%E8%AE%A1-%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F"><span class="toc-number">1.1.</span> <span class="toc-text">表设计 - 三大范式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F"><span class="toc-number">1.1.1.</span> <span class="toc-text">第一范式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F"><span class="toc-number">1.1.2.</span> <span class="toc-text">第二范式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F"><span class="toc-number">1.1.3.</span> <span class="toc-text">第三范式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E8%A1%A8"><span class="toc-number">1.2.</span> <span class="toc-text">建表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.2.1.</span> <span class="toc-text">数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E8%A1%A8demo"><span class="toc-number">1.2.2.</span> <span class="toc-text">建表demo</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-number">1.3.</span> <span class="toc-text">删除表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9Fconstraint"><span class="toc-number">1.4.</span> <span class="toc-text">约束constraint</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.4.1.</span> <span class="toc-text">约束类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E7%BA%A7%E6%B7%BB%E5%8A%A0"><span class="toc-number">1.4.2.</span> <span class="toc-text">列级添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E7%BA%A7%E6%B7%BB%E5%8A%A0"><span class="toc-number">1.4.3.</span> <span class="toc-text">表级添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.4.4.</span> <span class="toc-text">外键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E8%A1%A8%E8%A1%A5%E5%85%85"><span class="toc-number">1.4.5.</span> <span class="toc-text">建表补充</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DML"><span class="toc-number">2.</span> <span class="toc-text">DML</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.0.1.</span> <span class="toc-text">插入语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#auto-increment"><span class="toc-number">2.0.2.</span> <span class="toc-text">auto_increment</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.0.3.</span> <span class="toc-text">删除语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.0.4.</span> <span class="toc-text">更新语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">2.1.</span> <span class="toc-text">约束注意点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8-1"><span class="toc-number">2.1.1.</span> <span class="toc-text">删除表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%8C%E8%AE%B0%E5%BD%95"><span class="toc-number">2.1.2.</span> <span class="toc-text">删除行记录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-number">2.1.3.</span> <span class="toc-text">约束的缺点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%88%A0%E9%99%A4%E5%92%8C%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4"><span class="toc-number">2.2.</span> <span class="toc-text">物理删除和逻辑删除</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/08/21/life/" title="叮咚"><img src="/img/wlop012.jpg" onerror="this.onerror=null;this.src='/img/avatar.jpeg'" alt="叮咚"/></a><div class="content"><a class="title" href="/2021/08/21/life/" title="叮咚">叮咚</a><time datetime="2021-08-21T13:06:18.000Z" title="发表于 2021-08-21 21:06:18">2021-08-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/08/21/mysql-practice/" title="mysql_practice"><img src="/img/wlop012.jpg" onerror="this.onerror=null;this.src='/img/avatar.jpeg'" alt="mysql_practice"/></a><div class="content"><a class="title" href="/2021/08/21/mysql-practice/" title="mysql_practice">mysql_practice</a><time datetime="2021-08-21T13:03:42.000Z" title="发表于 2021-08-21 21:03:42">2021-08-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/08/21/mysql03/" title="数据库DTL"><img src="/img/wlop012.jpg" onerror="this.onerror=null;this.src='/img/avatar.jpeg'" alt="数据库DTL"/></a><div class="content"><a class="title" href="/2021/08/21/mysql03/" title="数据库DTL">数据库DTL</a><time datetime="2021-08-21T02:27:00.000Z" title="发表于 2021-08-21 10:27:00">2021-08-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/08/20/mysql02/" title="数据库DDL DML"><img src="/img/wlop012.jpg" onerror="this.onerror=null;this.src='/img/avatar.jpeg'" alt="数据库DDL DML"/></a><div class="content"><a class="title" href="/2021/08/20/mysql02/" title="数据库DDL DML">数据库DDL DML</a><time datetime="2021-08-20T06:27:30.000Z" title="发表于 2021-08-20 14:27:30">2021-08-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/08/16/mysql01/" title="mysql基础"><img src="/img/wlop012.jpg" onerror="this.onerror=null;this.src='/img/avatar.jpeg'" alt="mysql基础"/></a><div class="content"><a class="title" href="/2021/08/16/mysql01/" title="mysql基础">mysql基础</a><time datetime="2021-08-16T01:14:08.000Z" title="发表于 2021-08-16 09:14:08">2021-08-16</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/wlop012.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By sakura</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://beautifulboyy.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>